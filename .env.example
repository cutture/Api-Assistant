# ===========================================
# Intelligent Coding Agent - Environment Configuration
# ===========================================
# Copy this file to .env and fill in your values
# Never commit .env to version control!

# ===========================================
# APPLICATION SETTINGS
# ===========================================
APP_NAME=Intelligent Coding Agent
DEBUG=false
LOG_LEVEL=INFO
# Environment: "local" for development, "production" for Cloud Run
ENVIRONMENT=local

# ===========================================
# LLM CONFIGURATION
# ===========================================
# LLM Provider: "ollama" (local) or "groq" (cloud)
LLM_PROVIDER=ollama

# ----- Ollama (Local - Default) -----
OLLAMA_BASE_URL=http://localhost:11434
OLLAMA_MODEL=deepseek-coder:6.7b

# ----- Groq (Cloud - Fast API) -----
# Get your free API key at: https://console.groq.com
GROQ_API_KEY=your_groq_api_key_here
# Groq models for different agent types
GROQ_REASONING_MODEL=llama-3.3-70b-versatile
GROQ_CODE_MODEL=llama-3.3-70b-versatile
GROQ_GENERAL_MODEL=llama-3.3-70b-versatile

# ===========================================
# EMBEDDING & VECTOR DATABASE
# ===========================================
# Using local sentence-transformers model (no API key needed)
EMBEDDING_MODEL=all-MiniLM-L6-v2

# ChromaDB settings
CHROMA_PERSIST_DIR=./data/chroma_db
CHROMA_COLLECTION_NAME=api_docs

# ===========================================
# UPLOAD SETTINGS
# ===========================================
MAX_UPLOAD_SIZE_MB=10
ALLOWED_EXTENSIONS=json,yaml,yml,md,txt,py,js,ts,java,go,cs,rs

# ===========================================
# WEB SEARCH FALLBACK
# ===========================================
ENABLE_WEB_SEARCH=true
WEB_SEARCH_MIN_RELEVANCE=0.5
WEB_SEARCH_MAX_RESULTS=5

# ===========================================
# SECURITY CONFIGURATION
# ===========================================
# CRITICAL: Generate unique secret key for production!
# Generate with: python -c "import secrets; print(secrets.token_hex(32))"
SECRET_KEY=your-secret-key-CHANGE-THIS-IN-PRODUCTION

# CORS Origins - Allowed origins for cross-origin requests
# Development: http://localhost:3000,http://localhost:3001
# Production: https://your-frontend-domain.com
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:3001

# API Authentication (for programmatic access)
# Set to true in production to require API keys
REQUIRE_AUTH=false
# API Keys - Generate with: python -c "import secrets; print(f'api-key-{secrets.token_urlsafe(32)}')"
# Comma-separated list for multiple keys
API_KEYS=

# ===========================================
# JWT AUTHENTICATION
# ===========================================
# Secret key for JWT signing (defaults to SECRET_KEY if not set)
JWT_SECRET_KEY=
JWT_ALGORITHM=HS256
# Access token expires in 30 minutes
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30
# Refresh token expires in 7 days
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7

# ===========================================
# OAUTH - GOOGLE
# ===========================================
# Get credentials at: https://console.cloud.google.com/apis/credentials
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=

# ===========================================
# OAUTH - GITHUB
# ===========================================
# Get credentials at: https://github.com/settings/developers
GITHUB_CLIENT_ID=
GITHUB_CLIENT_SECRET=
# Callback URL for GitHub OAuth (e.g., http://localhost:8000/github/callback)
GITHUB_CALLBACK_URL=

# ===========================================
# EMAIL VERIFICATION (Optional)
# ===========================================
# SMTP settings for sending verification emails
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=
SMTP_PASSWORD=
EMAIL_FROM=noreply@coding-agent.com
VERIFICATION_TOKEN_EXPIRE_HOURS=24
# Skip email verification for local development
SKIP_EMAIL_VERIFICATION=true

# ===========================================
# PASSWORD REQUIREMENTS
# ===========================================
PASSWORD_MIN_LENGTH=8
PASSWORD_REQUIRE_UPPERCASE=true
PASSWORD_REQUIRE_LOWERCASE=true
PASSWORD_REQUIRE_DIGIT=true
PASSWORD_REQUIRE_SPECIAL=true

# ===========================================
# CODE EXECUTION SETTINGS
# ===========================================
# Maximum retry attempts for code validation loop
EXECUTION_MAX_RETRIES=5
# Timeout for code execution in seconds
EXECUTION_TIMEOUT_SECONDS=120
# Daily execution limit per user
EXECUTION_DAILY_LIMIT=100

# ===========================================
# ARTIFACT STORAGE
# ===========================================
# Local storage path for artifacts
ARTIFACT_STORAGE_PATH=./data/artifacts
# Maximum artifact file size in MB
ARTIFACT_MAX_SIZE_MB=50
# How long to keep artifacts (days)
ARTIFACT_RETENTION_DAYS=30
# Google Cloud Storage (for production)
GCS_BUCKET_NAME=
GCS_ARTIFACT_PREFIX=artifacts/

# ===========================================
# CLOUD RUN JOBS (Production)
# ===========================================
# For executing code in isolated containers
CLOUD_RUN_PROJECT=
CLOUD_RUN_REGION=asia-east1

# ===========================================
# RATE LIMITING
# ===========================================
ENABLE_RATE_LIMITING=true
# General API rate limits
RATE_LIMIT_REQUESTS_PER_MINUTE=60
RATE_LIMIT_REQUESTS_PER_HOUR=1000
RATE_LIMIT_REQUESTS_PER_DAY=10000
# Code execution rate limits (more restrictive)
RATE_LIMIT_EXECUTIONS_PER_MINUTE=10
RATE_LIMIT_EXECUTIONS_PER_HOUR=100
RATE_LIMIT_EXECUTIONS_PER_DAY=500

# ===========================================
# METRICS & MONITORING
# ===========================================
ENABLE_METRICS=true
# Alert when LLM costs exceed this amount (USD)
COST_ALERT_THRESHOLD=50.0
# Monthly cost limit (USD)
COST_LIMIT_MONTHLY=200.0
# Sentry DSN for error tracking (optional)
SENTRY_DSN=
